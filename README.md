# Habit Tracker API
Habit Tracker API — это RESTful API для управления привычками пользователей. Он позволяет создавать, читать, обновлять и удалять привычки, а также получать публичные и приятные привычки. 
API разработан с использованием Django и Django REST Framework.
## Содержание

- [Установка](#установка)
- [Использование](#использование)
- [Примеры запросов в Postman](#примеры-запросов-в-postman)

## Установка

1. Клонируйте репозиторий:

```bash
   git clone https://github.com/ваш-логин/ваш-репозиторий.git
   cd ваш-репозиторий
```

2. Создайте и активируйте виртуальное окружение:

```bash
python -m venv venv
source venv/bin/activate  # для Linux/Mac
venv\Scripts\activate  # для Windows
```

3. Установите зависимости:

```bash
pip install -r req.txt
```

4. Примените миграции:

```bash
python manage.py migrate
```

5. Запустите сервер:
```bash
python manage.py runserver
```
Теперь ваше приложение доступно по адресу http://localhost:8000/.

# Использование:

## Аутентификация
Для получения токена вам нужно отправить POST запрос на следующие эндпоинты:
1. Получение токена:

- URL: /api/token/
- Метод: POST
- Тело запроса (JSON):
```bash
{
    "username": "ваш_логин",
    "password": "ваш_пароль"
}
```
2. Обновление токена:

- URL: /api/token/refresh/
- Метод: POST
- Тело запроса (JSON):
```bash
{
    "refresh": "ваш_refresh_токен"
}
```
3. После получения токена, при отправке запросов добавьте заголовок:
```bash
Authorization: Bearer <token>
```

## Эндпоинты

### Привычки
Получить список привычек: GET /api/habits/

Возвращает список привычек текущего пользователя (неприятные привычки).
Создать привычку: POST /api/habits/

Создает новую привычку для текущего пользователя.
Получить публичные привычки: GET /api/habits/public/

Возвращает список публичных привычек (доступно для всех пользователей).
Получить приятные привычки: GET /api/habits/pleasant/

Возвращает список приятных привычек текущего пользователя (доступно только для авторизованных пользователей).

## Данные файла .env
Заполните файл ".env_example" своими данными и переименуйте его в '.env'

## Celery

В этом проекте реализована функциональность для отправки уведомлений пользователям и управления  с использованием Celery и telegram

## Установка и настройка

1. Убедитесь, что у вас установлен Celery и необходимые зависимости.
2. Настройте SMTP сервер в файле конфигурации вашего проекта для отправки почты.
3. Запустите Celery worker и Celery Beat в отдельных терминалах:

   ```bash
   # Запуск worker
   celery -A config worker --loglevel=info

   # Запуск beat
   celery -A config beat --loglevel=info
   ```
   
### Кастомная команда
```bash
   python manage.py start_bot
```
Запускает телеграм бота в который можно вписать email пользователя и к нему привяжется telegram chat_id